import{w as ce}from"./with-props-BqwZr1IK.js";import{r,u as de,b as xe,j as e,L as v}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{j as U,k as z,f as H,e as G,l as me}from"./index-dwZrHV5Z.js";import{P as he}from"./PageTransition-1p6Ne89E.js";import{u as ue}from"./UserContext-BcfRxPbJ.js";import{S as ge}from"./LoadingSpinner-C0-tq4kl.js";import{a as w}from"./api-BXsSQKvn.js";import{f as L}from"./format-CBpsKyOP.js";import"./proxy-7hmYPAw3.js";/* empty css                       */const pe=({message:s})=>{const[n,l]=r.useState(!0);async function x(i){l(!1);try{await w.delete(`/message/${i}/remove`)}catch(c){console.error("Error deleting message:",c)}}return n?e.jsxs("div",{className:"p-6 mb-3 bg-yellow-50 rounded-xl shadow-lg relative",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-14 h-14 bg-yellow-300 text-white rounded-full flex items-center justify-center text-2xl font-semibold",children:e.jsx("span",{role:"img","aria-label":"star",children:"â­"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:s.from_person}),e.jsx("p",{className:"text-md text-gray-700",children:s.message})]})]}),e.jsx("p",{className:"absolute top-2 right-4 text-xs text-gray-400",children:L(new Date(s.time_sent),"EEEE, MMMM dd, yyyy")}),e.jsx("div",{className:"absolute top-1/2 right-2 transform -translate-y-1/2",children:e.jsx("button",{className:"text-gray-400 hover:bg-gray-300 rounded-full p-2 transition-all duration-200 text-2xl font-bold hover:text-gray-700",onClick:()=>x(s.id),children:"X"})})]},s.id):null},Y=({app:s,completeButton:n,setUpdate:l,update:x})=>{async function i(c){try{await w.post(`/application/update/${s.id}/${c}/`)}catch(d){console.error("Error:",d)}l(!x)}return e.jsxs("div",{className:"p-5 mb-3 bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 relative hover:bg-blue-50",children:[e.jsxs("p",{className:"absolute top-2 right-4 text-xs text-gray-500",children:["Applied: ",L(new Date(s.date_applied),"MMM dd, yyyy")]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-6xl w-24 h-24 bg-blue-400 text-white rounded-full flex items-center justify-center font-bold shadow-md",children:"ðŸ“‹"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.opportunity.opportunity_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.opportunity.organisation_name})]}),e.jsx(v,{to:`/opportunity/${s.opportunity.id}`,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Learn More"})]}),n?e.jsxs("div",{className:"flex justfy-end items-center w-full",children:[e.jsx("span",{className:"text-sm text-gray-700 mr-4",children:"Think you have completed this activity?"}),e.jsx("button",{className:"px-6 py-3 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",onClick:()=>i("requesting_complete"),disabled:s.opportunity.has_applied,children:s.opportunity.status==="requesting_complete"?"Sent Requested":"Complete"}),e.jsx(v,{to:`/opportunity/${s.opportunity.id}/discussions`,className:"px-10 py-3 text-sm font-medium rounded-full text-gray-900 border border-gray-200 hover:bg-gray-50 transition-colors",children:"Discussions"})]}):""]})},fe=({opportunity:s})=>e.jsx("div",{className:"opportunity",children:e.jsx("div",{className:"bg-gray-100 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:s.image||"ðŸ“‹"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500",children:s.organization.name})]}),e.jsxs("h4",{className:"text-sm text-gray-500",children:["Effort: ",s.effort]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.organization.companiesHouseVerified&&e.jsx(VerificationBadge,{type:"companiesHouse"}),s.organization.charitiesCommissionVerified&&e.jsx(VerificationBadge,{type:"charitiesCommission"})]})]}),e.jsx("p",{className:"mt-4 text-gray-600",children:s.description}),s.tags&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:s.tags.map((n,l)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:n},l))}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ“"})," ",s.location_name]})}),e.jsx(v,{to:`/opportunity/${s.id}`,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Learn More"})]})]})})}),V=({value:s,duration:n=2e3})=>{const[l,x]=r.useState(0),i=r.useRef(null),c=r.useRef(null);return r.useEffect(()=>{const d=S=>{c.current||(c.current=S);const b=S-c.current,E=Math.min(b/n,1),j=1-Math.pow(1-E,4),M=Math.floor(j*s);x(M),E<1&&(i.current=requestAnimationFrame(d))};return i.current=requestAnimationFrame(d),()=>{i.current&&cancelAnimationFrame(i.current)}},[s,n]),e.jsx(e.Fragment,{children:l})},p=({category:s,score:n,maxScore:l,icon:x,color:i})=>{const c=Math.min(7,Math.floor(n/(l/7))+1),d=n%(l/7)/(l/7)*100;return e.jsxs("div",{className:"transform transition-all duration-300 hover:scale-105 p-4 bg-white rounded-xl shadow-md hover:shadow-lg",children:[e.jsx("div",{className:`w-full h-24 ${i} text-white rounded-lg flex items-center justify-center mb-3`,children:e.jsx("span",{className:"text-4xl",children:x})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Level ",c," Badge"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${i.replace("bg-","bg-")}`,style:{width:`${d}%`}})})]})},be=({volunteer:s})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:s.is_user?"Your Badges":"Badges"}),e.jsx(v,{to:"/badges",state:{from:"dashboard"},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"View All Badges"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsx(p,{category:"Elderly Care",score:s.scores.elderly||0,maxScore:500,icon:"ðŸ‘µ",color:"bg-amber-500"}),e.jsx(p,{category:"Medical",score:s.scores.medical||0,maxScore:500,icon:"ðŸ©º",color:"bg-red-500"}),e.jsx(p,{category:"Disabilities",score:s.scores.disability||0,maxScore:500,icon:"â™¿",color:"bg-blue-500"}),e.jsx(p,{category:"Animal Welfare",score:s.scores.animals||0,maxScore:500,icon:"ðŸ¾",color:"bg-green-500"}),e.jsx(p,{category:"Sports",score:s.scores.animals||0,maxScore:500,icon:"ðŸ¾",color:"bg-blue-600"}),e.jsx(p,{category:"Greener Planet",score:s.scores.animals||0,maxScore:500,icon:"ðŸ¾",color:"bg-green-600"}),e.jsx(p,{category:"Education",score:s.scores.animals||0,maxScore:500,icon:"ðŸ¾",color:"bg-yellow-500"}),e.jsx(p,{category:"Community",score:s.scores.animals||0,maxScore:500,icon:"ðŸ¾",color:"bg-purple-500"})]})]}),je=()=>{var R;const[s,n]=r.useState([]),[l,x]=r.useState(!0),[i,c]=r.useState([]),[d,S]=r.useState([]),[b,E]=r.useState([]),[j,M]=r.useState([]),{user:y}=ue(),{id:P}=de(),_=xe(),[C,Q]=r.useState(!1),[F,W]=r.useState(!1),[A,X]=r.useState(!1),[k,T]=r.useState(!1),[h,u]=r.useState(((R=_.state)==null?void 0:R.activeTab)||"stats"),[$,J]=r.useState([]),[K,D]=r.useState([]),Z=async()=>{try{const t=await w.get("/opportunities/");J(t)}catch(t){console.error("Error fetching opportunities:",t)}};r.useEffect(()=>{Z()},[]);function ee(t){let a=[];return $.forEach(o=>{o.categories.includes(t)&&a.push(o)}),a}function se(t,a){if($.length!=0){let o=ee(t);const I=Math.round(a/20);o=o.slice(0,I),D(N=>[...N,...o])}}const te=C?d:d.slice(0,3),re=F?b:b.slice(0,2),ae=A?j:j.slice(0,2);let B=0;r.useEffect(()=>{y&&(async()=>{try{x(!0),P?B=P:(await w.get("/volunteer/list/")).forEach(q=>{q.email===y.email&&(B=q.id)});const a=await w.get("/volunteer/"+B+"/"),o={};a.interests&&a.interests.length>0&&a.interests.forEach(m=>{const f=m.category;o[f]=(o[f]||0)+1});const I=Object.values(o).reduce((m,f)=>m+f,0),N={};Object.keys(o).forEach(m=>{N[m]=o[m]/I*100}),n({...a,categoryCounts:o,interestPercentages:N}),c(a.friends),S(a.messages),E(a.pending_applications),M(a.accepted_applications),D([]),Object.entries(N).forEach(([m,f])=>{se(m,f)})}catch(a){console.error("Error fetching opportunities:",a)}finally{x(!1)}})()},[y,C,k,$]);const[g,le]=r.useState(!1),O=r.useRef(null);r.useEffect(()=>{const t=new IntersectionObserver(([a])=>{a.isIntersecting&&(le(!0),t.disconnect())},{threshold:.1});return O.current&&t.observe(O.current),()=>t.disconnect()},[l]),r.useEffect(()=>{var t;(t=_.state)!=null&&t.activeTab&&u(_.state.activeTab)},[_.state]);function ie(){u("friends"),document.getElementById("active tab").scrollIntoView({behavior:"smooth"})}function ne(){u("badges"),document.getElementById("active tab").scrollIntoView({behavior:"smooth"})}function oe(){u("stats"),document.getElementById("active tab").scrollIntoView({behavior:"smooth"})}return e.jsx(he,{children:l?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(ge,{})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#A85AC8] to-blue-600 rounded-xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center gap-6",children:[y&&y.avatar_url?e.jsx("img",{src:y.avatar_url,alt:"Profile",className:"rounded-full w-24 h-24 border-4 border-white shadow-md"}):e.jsx("div",{className:"text-5xl bg-white/20 p-4 rounded-full",children:s.avatar||"ðŸ‘¤"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:s.is_user||s.showName?s.f_name+" "+s.l_name:s.display_name}),e.jsxs("div",{className:"mt-2 flex items-center gap-6 text-white/90",children:[e.jsxs("span",{onClick:oe,className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full hover:cursor-pointer hover:shadow-lg",children:[e.jsx(U,{className:"w-5 h-5"}),s.hours," hours volunteered"]}),e.jsxs("span",{onClick:ie,className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full hover:cursor-pointer hover:shadow-lg",children:[e.jsx(z,{className:"w-5 h-5"}),i.length," friends"]}),e.jsxs("span",{onClick:ne,className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full hover:cursor-pointer hover:shadow-lg",children:[e.jsx(H,{className:"w-5 h-5"}),Object.keys(s.scores).length," badges"]}),s.is_user?e.jsx(v,{to:`/volunteer/${s.id}/settings`,className:"flex items-center gap-2 bg-white/10 px-4 py-2 ml-auto rounded-full hover:bg-gray-800 transition-colors",children:"Edit Profile"}):null]})]})]})}),e.jsxs("div",{ref:O,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:`bg-[#9DC8DB] p-6 rounded-xl shadow-lg transform transition-all duration-500 ${g?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Total Hours"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:g?e.jsx(V,{value:s.hours}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Hours volunteered"})]}),e.jsxs("div",{className:`bg-[#8FB78F] p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-100 ${g?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Completions"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:g?e.jsx(V,{value:s.opportunities_completed}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Opportunities Done"})]}),e.jsxs("div",{className:`bg-[#FF9B57] p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-200 ${g?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Impact"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:g?e.jsx(V,{value:s.overall_score}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Points"})]}),e.jsxs("div",{className:`bg-[#F2799B] p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-300 ${g?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Last Completion"}),e.jsx("p",{className:"text-xl font-bold text-white",children:g?s.last_completion?L(new Date(s.last_completion),"EEEE, MMMM dd, yyyy"):"Not completed":"0"})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"active tab",className:"mb-6 border-b border-gray-200",children:e.jsxs("ul",{className:"flex flex-wrap -mb-px text-sm font-medium text-center text-gray-500",children:[e.jsx("li",{className:"mr-2",children:s.is_user&&e.jsxs("button",{className:`inline-flex items-center justify-center p-4 rounded-t-lg border-b-2 ${h==="stats"?"text-blue-600 border-blue-600":"border-transparent hover:text-gray-600 hover:border-gray-300"}`,onClick:()=>u("stats"),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Activity"]})}),e.jsx("li",{className:"mr-2",children:(s.showFriends||s.is_user)&&e.jsxs("button",{className:`inline-flex items-center justify-center p-4 rounded-t-lg border-b-2 ${h==="friends"?"text-blue-600 border-blue-600":"border-transparent hover:text-gray-600 hover:border-gray-300"}`,onClick:()=>u("friends"),children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Friends"]})}),e.jsx("li",{className:"mr-2",children:e.jsxs("button",{className:`inline-flex items-center justify-center p-4 rounded-t-lg border-b-2 ${h==="badges"?"text-blue-600 border-blue-600":"border-transparent hover:text-gray-600 hover:border-gray-300"}`,onClick:()=>u("badges"),children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Badges"]})}),e.jsx("li",{className:"mr-2",children:s.is_user&&e.jsxs("button",{className:`inline-flex items-center justify-center p-4 rounded-t-lg border-b-2 ${h==="foryou"?"text-blue-600 border-blue-600":"border-transparent hover:text-gray-600 hover:border-gray-300"}`,onClick:()=>u("foryou"),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"For you"]})})]})}),h==="stats"&&s.is_user&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Opportunities applied for"}),b.length===0?e.jsx("div",{className:"col-span-2 text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No pending applications"})}):e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"divide-y divide-gray-100",children:re.map(t=>e.jsx(Y,{app:t,completeButton:!1,setUpdate:T,update:k},t.id))})})}),b.length>2&&e.jsx("button",{onClick:()=>W(!F),className:"w-full py-1 bg-blue-500 hover:bg-blue-600 text-white px-4 rounded-full transition-all relative",children:F?"Show Less":"Show More"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mt-8 mb-4",children:"Opportunities in Progress"}),j.length===0?e.jsx("div",{className:"col-span-2 text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No opportunities in progress"})}):e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"divide-y divide-gray-100",children:ae.map(t=>e.jsx(Y,{app:t,completeButton:!0,setUpdate:T,update:k},t.id))})})}),j.length>2&&e.jsx("button",{onClick:()=>X(!A),className:"w-full py-1 bg-blue-500 hover:bg-blue-600 text-white px-4 rounded-full transition-all relative",children:A?"Show Less":"Show More"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mt-8 mb-4",children:"Messages"}),d.length===0?e.jsx("div",{className:"col-span-2 text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No messages"})}):e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"divide-y divide-gray-100",children:te.map(t=>e.jsx(pe,{message:t},t.id))})})}),d.length>3&&e.jsx("button",{onClick:()=>Q(!C),className:"w-full py-1 bg-blue-500 hover:bg-blue-600 text-white px-4 rounded-full transition-all relative",children:C?"Show Less":"Show More"})]}),h==="friends"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Friends"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.map(t=>e.jsx(v,{to:`/dashboard/volunteer/${t.id}/`,className:"block rounded-lg w-full z-10 text-left px-4 py-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4 transition-all duration-300 hover:shadow-xl hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("span",{className:"text-3xl bg-gray-50 p-2 rounded-full",children:"ðŸ‘¤"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.display_name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.recentActivity})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-blue-50 text-blue-700 px-3 py-1 rounded-full",children:[e.jsx(U,{className:"w-4 h-4"}),t.overall_score," Impact"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-purple-50 text-purple-700 px-1 py-1 rounded-full",children:[e.jsx(G,{className:"w-4 h-4"}),t.opportunities_completed," Completed Opportunities"]})]})]},t.id)}))})]})}),h==="badges"&&e.jsx(be,{volunteer:s})]}),h==="foryou"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Opportunities recommended based off interests! "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:K.map(t=>e.jsx(fe,{opportunity:t},t.id))})]})})]})})})},Ae=ce(je);export{Ae as default};
