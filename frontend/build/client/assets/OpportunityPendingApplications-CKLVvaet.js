import{w as v}from"./with-props-BqwZr1IK.js";import{r as i,u as k,j as e,L as C}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{P as A}from"./PageTransition-1p6Ne89E.js";/* empty css                       */import{a as m}from"./api-BXsSQKvn.js";import{a as _}from"./index-dwZrHV5Z.js";import{m as s}from"./proxy-7hmYPAw3.js";const b=({rawDates:n})=>{const d=n.split(",").map(a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}));return e.jsx("ul",{children:d.map((a,r)=>e.jsx("li",{children:a},r))})},q=()=>{const[n,d]=i.useState([]),[a,r]=i.useState([]),[S,x]=i.useState(!0),{id:h}=k(),[p,f]=i.useState("applications"),[u,j]=i.useState(!1);function N(){let t=document.getElementById("searchBar").value.toLowerCase();document.querySelectorAll(".volunteer").forEach(l=>{l.textContent.toLowerCase().includes(t)?l.style.display="block":l.style.display="none"})}i.useEffect(()=>{g()},[]);async function g(){try{x(!0);const t=await m.get(`/volunteers/pending/${h}/`);d(t);const c=await m.get(`/volunteers/requested/${h}/`);r(c)}catch(t){console.error("Error fetching opportunities:",t)}finally{x(!1)}}const y={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},w={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.4}}};async function o(t,c){try{await m.post(`/application/update/${c.id}/${t}/`),g()}catch(l){console.error("Error:",l)}}return e.jsx(A,{children:e.jsx("div",{className:"min-h-screen bg-white -mt-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Applications"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsx("input",{id:"searchBar",type:"text",onKeyUp:N,placeholder:"Search application...",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-200"})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm mb-8",children:[e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"flex flex-wrap sm:flex-nowrap border-b",children:[{id:"applications",label:"Applications",icon:"ðŸ‘¥"},{id:"requested_completion",label:"Completion Requests",icon:"ðŸ“¨"}].map(t=>e.jsxs("button",{className:`flex-1 flex items-center justify-center gap-2 py-4 px-4 text-md font-medium transition-all 
                    ${p===t.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>f(t.id),children:[e.jsx("span",{className:"hidden sm:inline",children:t.icon}),e.jsx("span",{children:t.label})]},t.id))}),e.jsxs("div",{className:"p-6",children:[p==="applications"&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Your Applications"}),n.length===0?e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-10 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-5xl block mb-4",children:"ðŸ‘‹"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No application"})]}):e.jsx(s.div,{variants:y,initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(t=>e.jsxs(s.div,{whileHover:{scale:1.03},whileTap:{scale:.98},className:"bg-white border rounded-lg shadow-sm hover:shadow-md transition overflow-hidden",children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-xl font-bold",children:t.display_name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-lg font-medium text-gray-900 truncate",children:t.display_name}),e.jsx(b,{rawDates:t.application.dates_worked})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>j(u===t.id?null:t.id),className:"p-2 text-gray-400 hover:text-gray-600 focus:outline-none rounded-full hover:bg-gray-100 transition",children:e.jsx(_,{})}),u===t.id&&e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},className:"absolute right-0 z-10 mt-2 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[e.jsx("button",{onClick:()=>o("accepted",t.application),className:"block w-full text-left px-4 py-2 text-sm text-black-600 hover:bg-green-50",children:"Accept"}),e.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:()=>o("rejected",t.application),children:"Reject"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 px-5 py-3",children:e.jsx(C,{to:`/dashboard/volunteer/${t.volunteer_id}/`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View volunteer details â†’"})})]},t.id))})]}),p==="requested_completion"&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Requesting Opportunity Completion"}),a.length===0?e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-10 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-5xl block mb-4",children:"ðŸ“­"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Requests"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"You don't have any pending requests"})]}):e.jsx(s.div,{variants:y,initial:"hidden",animate:"show",className:"space-y-4",children:a.map(t=>e.jsx(s.div,{variants:w,whileHover:{scale:1.02},className:"bg-white border rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:t.display_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-medium text-gray-900",children:t.display_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Has ",t.display_name," completed their task on these date(s)?"]}),e.jsx(b,{rawDates:t.application.dates_worked})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o("not_completed",t.application),className:"px-4 py-2 border border-gray-300 rounded-full text-gray-700 hover:bg-gray-50 transition",children:"Not Complete"}),e.jsx("button",{onClick:()=>o("completed",t.application),className:"px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 shadow-sm transition",children:"Complete"})]})]})},t.id))})]})]})]})})]})]})})})},O=v(q);export{O as default};
