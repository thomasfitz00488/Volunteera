import{w as Y}from"./with-props-BqwZr1IK.js";import{r as l,j as e,L as j}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{P as O}from"./PageTransition-1p6Ne89E.js";import{S as E}from"./LoadingSpinner-C0-tq4kl.js";import{a as c}from"./api-BXsSQKvn.js";import{u as W}from"./UserContext-BcfRxPbJ.js";import{a as K,b as G,c as J}from"./index-dwZrHV5Z.js";import{m as t}from"./proxy-7hmYPAw3.js";import{A as Q}from"./index-CrwWTF06.js";/* empty css                       */const X=()=>{const[v,N]=l.useState(!0),[w,U]=l.useState([]),[F,$]=l.useState([]),[C,L]=l.useState([]),[k,P]=l.useState([]),{user:x}=W(),[p,T]=l.useState(null),[R,y]=l.useState(null),[d,g]=l.useState("friends"),[q,V]=l.useState(!1);let o=0;function z(){let s=document.getElementById("searchBar").value.toLowerCase();document.querySelectorAll(".user").forEach(n=>{n.textContent.toLowerCase().includes(s)?n.style.display="block":n.style.display="none"})}const m=async()=>{try{if(N(!0),!x){console.error("User is null. Cannot fetch data.");return}const s=await c.get("/volunteer/list/"),a=s;let n=s;a.forEach(i=>{i.email===x.email&&(o=i.id,T(i.id))});const _=await c.get("/volunteer/"+o+"/");$(_.friends);const D=_.friends;n=n.filter(i=>!D.some(r=>r.id===i.id)),n=n.filter(i=>i.id!==o);const b=await c.get("/friendship/list/pending/");n=n.filter(i=>!b.some(r=>r.from_volunteer===o&&r.to_volunteer===i.id||r.to_volunteer===o&&r.from_volunteer===i.id));const H=b.filter(i=>i.from_volunteer===o&&i.to_volunteer!==o);let S=[];for(const i of H){const r=await c.get("/volunteer/"+i.to_volunteer+"/");S.push(r)}L(S);const I=b.filter(i=>i.to_volunteer===o&&i.from_volunteer!==o);let A=[];for(const i of I){const r=await c.get("/volunteer/"+i.from_volunteer+"/");A.push(r)}P(A),U(n)}catch(s){console.error("Error fetching opportunities:",s)}finally{N(!1)}};l.useEffect(()=>{x&&m()},[x]);const f=async s=>{try{const a=await c.delete(`/friendship/delete/${s}/${p}/`);m(),y(a.message)}catch(a){console.error("Error deleting friendship:",a)}},B=async s=>{try{const a=await c.post(`/friendship/create/${s}/${p}/`);m(),y(a.message)}catch(a){console.error("Error creating friendship:",a)}},M=async s=>{try{const a=await c.post(`/friendship/accept/${s}/${p}/`,{headers:{"Content-Type":"application/json"}});m(),y(a.message)}catch(a){console.error("Error creating friendship:",a)}},h={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},u={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.4}}};return e.jsx(O,{children:v?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(E,{})}):e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#A85AC8] to-blue-600 py-12 px-4 sm:px-6 lg:px-8 shadow-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(t.h1,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300},className:"text-4xl font-bold text-white tracking-tight text-center",children:"Friends"}),e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-3 text-xl text-blue-100 max-w-3xl mx-auto text-center",children:"Connect with other volunteers and build your community"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-12",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm mb-8",children:[e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"flex flex-wrap sm:flex-nowrap border-b",children:[{id:"friends",label:"My Friends",icon:"ðŸ‘¥"},{id:"friendRequests",label:"Friend Requests",icon:"ðŸ“¨"},{id:"sentRequests",label:"Sent Requests",icon:"ðŸ“¤"},{id:"search",label:"Find Friends",icon:"ðŸ”"}].map(s=>e.jsxs("button",{className:`flex-1 flex items-center justify-center gap-2 py-4 px-4 text-md font-medium transition-all 
                    ${d===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>g(s.id),children:[e.jsx("span",{className:"hidden sm:inline",children:s.icon}),e.jsx("span",{children:s.label})]},s.id))}),e.jsxs("div",{className:"p-6",children:[d==="friends"&&e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Your Friends"}),F.length===0?e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-10 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-5xl block mb-4",children:"ðŸ‘‹"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No friends yet"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Start connecting with other volunteers"}),e.jsx("button",{onClick:()=>g("search"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition shadow-sm",children:"Find Friends"})]}):e.jsx(t.div,{variants:h,initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(s=>e.jsxs(t.div,{variants:u,whileHover:{scale:1.03},whileTap:{scale:.98},className:"bg-white border rounded-lg shadow-sm hover:shadow-md transition overflow-hidden",children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-xl font-bold",children:s.display_name.charAt(0).toUpperCase()}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-lg font-medium text-gray-900 truncate",children:s.display_name})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>V(q===s.id?null:s.id),className:"p-2 text-gray-400 hover:text-gray-600 focus:outline-none rounded-full hover:bg-gray-100 transition",children:e.jsx(K,{})}),q===s.id&&e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},className:"absolute right-0 z-10 mt-2 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[e.jsx(j,{to:`/dashboard/volunteer/${s.id}/`,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-blue-600 hover:text-white transition-colors",children:"View Profile"}),e.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:()=>f(s.id),children:"Remove Friend"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 px-5 py-3",children:e.jsx(j,{to:`/dashboard/volunteer/${s.id}/`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View volunteer details â†’"})})]},s.id))})]}),d==="friendRequests"&&e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pending Friend Requests"}),k.length===0?e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-10 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-5xl block mb-4",children:"ðŸ“­"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No friend requests"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"You don't have any pending friend requests"})]}):e.jsx(t.div,{variants:h,initial:"hidden",animate:"show",className:"space-y-4",children:k.map(s=>e.jsx(t.div,{variants:u,whileHover:{scale:1.02},className:"bg-white border rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:s.display_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-medium text-gray-900",children:s.display_name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Wants to connect with you"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f(s.id),className:"px-4 py-2 border border-gray-300 rounded-full text-gray-700 hover:bg-gray-50 transition",children:"Decline"}),e.jsx("button",{onClick:()=>M(s.id),className:"px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 shadow-sm transition",children:"Accept"})]})]})},s.id))})]}),d==="sentRequests"&&e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Sent Friend Requests"}),C.length===0?e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-10 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-5xl block mb-4",children:"ðŸ“¤"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No sent requests"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"You haven't sent any friend requests yet"}),e.jsx("button",{onClick:()=>g("search"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-full shadow-sm hover:bg-blue-700 transition",children:"Find Friends"})]}):e.jsx(t.div,{variants:h,initial:"hidden",animate:"show",className:"space-y-4",children:C.map(s=>e.jsx(t.div,{variants:u,whileHover:{scale:1.02},className:"bg-white border rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:s.display_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-medium text-gray-900",children:s.display_name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Request pending"})]})]}),e.jsx("button",{onClick:()=>f(s.id),className:"px-4 py-2 border border-gray-300 text-red-600 rounded-full hover:bg-red-50 transition",children:"Cancel Request"})]})},s.id))})]}),d==="search"&&e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Find New Friends"}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{id:"searchBar",onKeyUp:z,type:"text",placeholder:"Search for volunteers...",className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),v?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(E,{})}):w.length===0?e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-10 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-5xl block mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No volunteers found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search"})]}):e.jsx(t.div,{variants:h,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(s=>e.jsx(t.div,{className:"user",variants:u,whileHover:{scale:1.03},whileTap:{scale:.98},children:e.jsx("div",{className:"bg-white border rounded-lg shadow-sm hover:shadow transition overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-xl font-bold",children:s.display_name.charAt(0).toUpperCase()}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.display_name})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("button",{onClick:()=>B(s.id),className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 shadow-sm transition",children:[e.jsx(G,{className:"mr-1",size:14}),"Add Friend"]}),e.jsxs(j,{to:`/dashboard/volunteer/${s.id}/`,className:"flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-full hover:bg-gray-50 transition",children:[e.jsx(J,{className:"mr-1",size:14}),"View Profile"]})]})]})})},s.id))})]})]})]}),e.jsx(Q,{children:R&&e.jsx(t.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-md shadow-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),R]})})})]})]})})},de=Y(X);export{de as default};
