import{w as f}from"./with-props-BqwZr1IK.js";import{r as l,a as u,j as e,L as s,M as j,f as v,S as N,h as w,O as k}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{u as p,a as L,b as S,U as _}from"./UserContext-BcfRxPbJ.js";import{m as h}from"./proxy-7hmYPAw3.js";import{A as O}from"./index-CrwWTF06.js";const z=({isScrolled:o=!1,gradientStyle:c={}})=>{const{user:t,logout:d}=p(),[n,i]=l.useState(!1),[r,a]=l.useState(!1),[x,m]=l.useState(!1),y=u();l.useEffect(()=>{const b=setTimeout(()=>{a(!0)},1e3);return()=>clearTimeout(b)},[]);const g=()=>{d(),y("/")};return e.jsxs("nav",{className:"fixed w-full z-50",children:[e.jsx(h.div,{initial:{scaleY:0},animate:{scaleY:r?1:0,opacity:r?1:0},transition:{duration:.8,ease:"easeOut"},className:"h-1 w-full bg-gradient-to-r from-blue-500 via-emerald-400 to-blue-500 bg-[length:200%_auto] animate-gradient"}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsx("div",{className:"flex",children:e.jsx(s,{to:t?"/dashboard":"/",className:"flex-shrink-0 flex items-center",children:e.jsx("span",{className:`transition-all duration-500 transform ${o?"animate-gradient bg-gradient-to-r from-blue-600 via-green-500 to-blue-600 bg-[length:200%_auto] bg-clip-text text-transparent text-xl font-semibold":"text-xl font-semibold text-gray-900"}`,style:o?c:{},children:"Volunteera"})})}),e.jsxs("div",{className:"hidden sm:flex sm:items-center sm:space-x-6",children:[e.jsx(s,{to:"/",className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"Home"}),e.jsx(s,{to:"/browse",className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"Browse"}),t&&e.jsxs(e.Fragment,{children:[e.jsx(s,{to:"/dashboard",className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"Dashboard"}),t.is_organization&&e.jsxs(s,{to:"/opportunities/create",className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-green-600 hover:bg-green-700 transition-colors flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Opportunity"]})]}),t&&!t.is_organization&&e.jsx(s,{to:"/friends",className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900",children:"Friends"}),e.jsx(s,{to:"/leaderboard",className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900",children:"Leaderboard"}),t?e.jsxs("div",{className:"relative ml-3 flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[t.is_organization&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full",children:"Organization"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[t.avatar_url&&e.jsx("img",{src:t.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full object-cover border border-gray-200"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.email})]})]}),e.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{to:"/login",className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"Login"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>m(!x),onBlur:()=>setTimeout(()=>m(!1),100),className:"ml-2 px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors flex items-center",children:["Register",e.jsx("svg",{className:`ml-2 h-4 w-4 transition-transform ${x?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsxs(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:[e.jsxs(s,{to:"/register/volunteer",state:{type:"volunteer"},className:"block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸ¤"}),"I'm a Volunteer"]}),e.jsxs(s,{to:"/register",state:{type:"organization"},className:"block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 rounded-b-lg flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸ¢"}),"I'm an Organization"]})]})]})]}),e.jsx(s,{to:"/about",className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors",children:"About Us"})]}),e.jsx("div",{className:"sm:hidden flex items-center",children:e.jsxs("button",{onClick:()=>i(!n),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:[e.jsx("span",{className:"sr-only",children:"Open main menu"}),e.jsx("svg",{className:`${n?"hidden":"block"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),e.jsx("svg",{className:`${n?"block":"hidden"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})})]})})}),e.jsx("div",{className:`${n?"block":"hidden"} sm:hidden`,children:e.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[e.jsx(s,{to:"/",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Home"}),e.jsx(s,{to:"/browse",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Browse"}),t&&e.jsx(s,{to:"/dashboard",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Dashboard"}),t&&t.is_organization&&e.jsx(s,{to:"/opportunities/create",className:"block px-3 py-2 text-base font-medium text-green-600 hover:text-green-700 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Opportunity"]})}),t&&!t.is_organization&&e.jsx(s,{to:"/friends",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Friends"}),e.jsx(s,{to:"/leaderboard",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Leaderboard"}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2",children:[t.is_organization&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Organization"}),e.jsx("span",{className:"block mt-1 text-sm font-medium text-gray-700",children:t.email})]}),e.jsx("button",{onClick:g,className:"block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{to:"/login",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Login"}),e.jsxs("div",{className:"px-3 py-2 space-y-1",children:[e.jsx(s,{to:"/register",state:{type:"volunteer"},className:"block px-4 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Register as Volunteer"}),e.jsx(s,{to:"/register",state:{type:"organization"},className:"block px-4 py-2 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",children:"Register as Organization"})]})]})]})})]})},C=({children:o})=>{const c=u(),{user:t,login:d}=p();return L({onSuccess:async i=>{try{const r=await fetch("/api/auth/google/callback/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:i.credential,user_type:"volunteer"})}),a=await r.json();if(!r.ok)throw new Error(a.error||"Login failed");localStorage.setItem("access_token",a.access),localStorage.setItem("refresh_token",a.refresh),d(a.user),c("/dashboard")}catch(r){console.error("Google One Tap error:",r),alert("Login failed: "+r.message)}},onError:i=>{console.error("Google One Tap login failed:",i),alert("Google login failed. Please try again.")},disabled:!!t,auto_select:!0,use_fedcm_for_prompt:!0,cancel_on_tap_outside:!1}),o};function E({children:o}){return e.jsxs("html",{lang:"en",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"UTF-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e.jsx("title",{children:"Volunterra"}),e.jsx(j,{}),e.jsx(v,{})]}),e.jsxs("body",{children:[o,e.jsx(N,{}),e.jsx(w,{})]})]})}const F=f(function(){const[c,t]=l.useState(!1),[d,n]=l.useState(0);l.useEffect(()=>{const r=()=>{const a=window.scrollY;t(a>50),n(a*.2)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const i={backgroundPosition:`${d}% 50%`};return e.jsx(S,{clientId:"1032409090840-gus43isikcnuq4n365l7gocm53h725dl.apps.googleusercontent.com",children:e.jsx(_,{children:e.jsx(C,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(z,{isScrolled:c,gradientStyle:i}),e.jsx(O,{mode:"wait",children:e.jsx("main",{className:"pt-16",children:e.jsx(k,{})})})]})})})})});export{E as Layout,F as default};
