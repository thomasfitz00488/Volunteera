import{w as p}from"./with-props-BqwZr1IK.js";import{r as o,a as b,j as e,L as g}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{u as f,G as j}from"./UserContext-BcfRxPbJ.js";import{P as y}from"./PageTransition-1p6Ne89E.js";import"./proxy-7hmYPAw3.js";const w=()=>{const[l,d]=o.useState(""),[n,u]=o.useState(""),[c,r]=o.useState(""),i=b(),{login:m}=f(),x=async t=>{t.preventDefault();try{const s=await fetch("/api/auth/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:n})});if(!s.ok)throw new Error("Invalid credentials");const a=await s.json();localStorage.setItem("access_token",a.access),localStorage.setItem("refresh_token",a.refresh),m(a.user),i("/dashboard")}catch(s){r(s.message)}},h=async t=>{try{const s=await fetch("/api/auth/google/callback/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t.credential,user_type:"volunteer"})});if(!s.ok)throw new Error("Google login failed");const a=await s.json();localStorage.setItem("access_token",a.access),localStorage.setItem("refresh_token",a.refresh),m(a.user),i("/dashboard")}catch(s){r(s.message)}};return e.jsx(y,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome back"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",e.jsx(g,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"create a new account"})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[c&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:c}),e.jsx(j,{onSuccess:h,onError:()=>r("Google login failed"),className:"w-full mb-4"}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),e.jsxs("form",{className:"space-y-6",onSubmit:x,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:l,onChange:t=>d(t.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:n,onChange:t=>u(t.target.value)})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in"})})]})]})})]})})},C=p(w);export{C as default};
