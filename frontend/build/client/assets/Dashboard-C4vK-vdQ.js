import{w as b}from"./with-props-BqwZr1IK.js";import{r as l,j as e,L as o}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{u as N}from"./UserContext-BcfRxPbJ.js";import{P as v}from"./PageTransition-1p6Ne89E.js";import{a as x}from"./api-BXsSQKvn.js";import w from"./VolunteerDashboard-DGq2RJXF.js";import"./proxy-7hmYPAw3.js";import"./index-DDJz-nCr.js";import"./LoadingSpinner-CGbvDqwE.js";import"./format-CBpsKyOP.js";const c=({title:s,value:d,icon:a})=>e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:s}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:d})]}),e.jsx("div",{className:"text-3xl text-gray-400",children:a})]})}),_=()=>{var p;const[s,d]=l.useState(null),[a,g]=l.useState(null),[m,h]=l.useState(!1),[i,n]=l.useState({}),[f,j]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const[r,u]=await Promise.all([x.get("/organization/stats/"),x.get("/organization/profile/")]);d(r),g(u),n(u)}catch(r){console.error("Error fetching data:",r)}finally{j(!1)}})()},[]);const y=async t=>{t.preventDefault();try{const r=await x.put("/organization/profile/",i);g(r),h(!1)}catch(r){console.error("Error updating profile:",r)}};return f||!s||!a?e.jsx("div",{children:"Loading..."}):e.jsx(v,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Organization Profile"}),e.jsx("p",{className:"text-gray-500",children:"Manage your organization's information"})]}),e.jsx("button",{onClick:()=>h(!m),className:"px-4 py-2 text-sm font-medium rounded-full text-gray-900 border border-gray-200 hover:bg-gray-50",children:m?"Cancel":"Edit Profile"})]}),m?e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organization Name"}),e.jsx("input",{type:"text",value:i.name||"",onChange:t=>n({...i,name:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:i.description||"",onChange:t=>n({...i,description:t.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo"}),e.jsx("input",{type:"file",onChange:t=>n({...i,logo:t.target.files[0]}),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-50 file:text-gray-700 hover:file:bg-gray-100"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mr-5",children:"Automatically accept requests?  "}),e.jsx("input",{className:"flex",type:"checkbox",defaultChecked:i.automatic,onChange:t=>n({...i,automatic:t.target.checked})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800",children:"Save Changes"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[a.logo&&e.jsx("img",{src:a.logo,alt:"Logo",className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-medium",children:a.name}),e.jsx("p",{className:"text-gray-500",children:a.email})]})]}),e.jsx("p",{className:"text-gray-600",children:a.description}),a.charity_number&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Charity Number: ",a.charity_number]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(c,{title:"Total Opportunities",value:(s==null?void 0:s.total_opportunities)||0,icon:"ðŸ“Š"}),e.jsx(c,{title:"Active Opportunities",value:(s==null?void 0:s.active_opportunities)||0,icon:"âœ¨"}),e.jsx(c,{title:"Total Applications",value:(s==null?void 0:s.total_applications)||0,icon:"ðŸ“"}),e.jsx(c,{title:"Pending Applications",value:(s==null?void 0:s.pending_applications)+(s==null?void 0:s.request_applications)||0,icon:"â³"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Live Opportunities"}),e.jsx(o,{to:"/opportunities/create",className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800",children:"Create New"})]}),e.jsx("div",{className:"divide-y",children:(p=s==null?void 0:s.recent_opportunities)==null?void 0:p.map(t=>e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.location_name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.pending_applications+t.request_applications," Pending/Requested Applications"]})]}),e.jsx(o,{to:`/opportunity/${t.id}/pending/`,className:"text-sm text-gray-600 hover:text-gray-900",children:"View Applications â†’"}),e.jsx(o,{to:`/opportunity/${t.id}/edit/`,className:"text-sm text-gray-600 hover:text-gray-900",children:"Edit"}),e.jsx(o,{to:`/opportunity/${t.id}/discussions/`,className:"text-sm text-gray-600 hover:text-gray-900",children:"Discussions"})]})},t.id))})]})]})})})})},k=()=>{const{user:s}=N();return s?e.jsx("div",{className:"min-h-screen bg-gray-50",children:s.is_organization?e.jsx(_,{}):s.is_volunteer?e.jsx(w,{}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Type Not Found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Please contact support if you believe this is an error."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})})},R=b(k);export{R as default};
